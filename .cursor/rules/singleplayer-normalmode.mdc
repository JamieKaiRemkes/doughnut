---
description: 
globs: **/*
---
# Car Dice Roll Race Feature
You will need to implement a new feature which will allow the player to do car racing. The player will roll a dice and depending on the outcome of the roll will determine the how far the car will move.

## Domain Model
### Player
The player can enter the page "Car Dice Roll Race" to play the game as a guest.

### Car
Each player has a Car. Each time a player rolls a dice, the car will move.
Car has the following attributes:
- HP: The health point of this car
- Current Position: The current position of the car

### Round
The Round is to record the Player's move.
The attribute of this can be the following:
- Dice Outcome: the outcome of the dice (1-6)

## Contraints
For the initial version, we have the following constraints:
- The initial HP of a Player is always 6
- The car initial position is always 0
- The target position is always 20

## System Flow
### Player visits the "Car Dice Roll Race" page
1. The player enter our website
2. The player visits a new Vue Route `/d/race` to start the game.
3. The system will display the player's car and the finish line(which is the target position). The position is based on the last position the page was left-off (depends on the Round).

### Player interaction with the game
1. For each Round, If the car position is not at the target position yet, the player can click a button to roll a dice. The car will then move forward according to the following rules:
   - If the outcome is an even number, then the car will be moved by 2 positions
   - If the outcome is an odd number, then the car will be moved by 1 position
2. Once the car is moved, the round ends.

### Winning Condition
1. If the car has reached the target position, then the Round ends and the player will not be able to do any actions, except for Resetting the Game.

### Resetting the Game
1. When the player clicked on the Reset button, the system will reset the round count that is currently associated with the player. Effectively, this will reset the current position of the Car to 0 again. Additionally, when the player re-visits the `/d/race` page, the car will be at the starting position again.

### Endpoint Contract
1. POST /api/race/go_normal
   request:{"playerId":"<string id generated by frontend>"}
2. GET /api/race/current_progress?playerId=<playerId>
   response:{
      "current_progress":{
         "car_position":<carPosition>
         "round_count":<roundCount>
         "last_dice_face":<lastDiceFace>
      }
   }
3.POST /api/race/reset
request:{"playerId":"<playerId>"}




